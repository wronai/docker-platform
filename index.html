<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Vault Project Explorer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <style>
        body { padding: 20px; }
        #file-explorer { max-height: 80vh; overflow-y: auto; }
        #file-content { padding: 20px; border-left: 1px solid #ddd; }
        .file-item { cursor: pointer; padding: 5px; }
        .file-item:hover { background-color: #f8f9fa; }
        .dir-item { font-weight: bold; }
        .markdown-body { max-width: 800px; margin: 0 auto; }
        .spinner-border { width: 1.5rem; height: 1.5rem; }
        .breadcrumb { background-color: #f8f9fa; padding: 0.75rem 1rem; border-radius: 0.25rem; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row mb-3">
            <div class="col-12">
                <h1>Media Vault Project Explorer</h1>
                <nav aria-label="breadcrumb">
                    <ol id="breadcrumb" class="breadcrumb">
                        <li class="breadcrumb-item active" aria-current="page">/</li>
                    </ol>
                </nav>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div id="file-explorer" class="list-group">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div id="file-content" class="markdown-body">
                    <h2>Welcome to Media Vault Project Explorer</h2>
                    <p>Select a file from the explorer to view its contents.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.2.12/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        // Configuration
        const PROJECT_FILES = {
            "README.md": "# Media Vault\n\nA comprehensive media management platform.\n\n## Features\n- Media organization\n- AI-powered analysis\n- User authentication\n- Admin dashboard",
            "docker-compose.yml": "version: '3.8'\n\nservices:\n  media-vault-api:\n    image: media-vault-api:latest\n    ports:\n      - \"8080:8080\"\n  \n  media-vault-admin:\n    image: media-vault-admin:latest\n    ports:\n      - \"3000:80\"\n\n  # ... other services ...",
            "package.json": "{\n  \"name\": \"media-vault\",\n  \"version\": \"1.0.0\",\n  \"scripts\": {\n    \"start\": \"node server.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.17.1\"\n  }\n}",
            "src/index.js": "// Main application entry point\nconst express = require('express');\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send('Welcome to Media Vault!');\n});\n\napp.listen(3000, () => {\n  console.log('Server is running on port 3000');\n});"
        };

        // File system structure
        const fileSystem = {
            name: "",
            type: "directory",
            path: "",
            children: [
                {
                    name: "src",
                    type: "directory",
                    path: "src",
                    children: [
                        {
                            name: "index.js",
                            type: "file",
                            path: "src/index.js"
                        },
                        {
                            name: "utils",
                            type: "directory",
                            path: "src/utils",
                            children: []
                        }
                    ]
                },
                {
                    name: "public",
                    type: "directory",
                    path: "public",
                    children: []
                },
                {
                    name: "README.md",
                    type: "file",
                    path: "README.md"
                },
                {
                    name: "docker-compose.yml",
                    type: "file",
                    path: "docker-compose.yml"
                },
                {
                    name: "package.json",
                    type: "file",
                    path: "package.json"
                }
            ]
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderDirectory(fileSystem);
            updateBreadcrumb([]);
        });

        // Render directory contents
        function renderDirectory(node, path = []) {
            const explorer = document.getElementById('file-explorer');
            explorer.innerHTML = '';

            // Add parent directory link if not in root
            if (path.length > 0) {
                const parentPath = path.slice(0, -1);
                const parentItem = document.createElement('div');
                parentItem.className = 'list-group-item file-item';
                parentItem.innerHTML = 'ðŸ“ ..';
                parentItem.onclick = () => navigateTo(parentPath);
                explorer.appendChild(parentItem);
            }

            // Add directories and files
            (node.children || []).forEach(child => {
                const item = document.createElement('div');
                const isDir = child.type === 'directory';
                
                item.className = `list-group-item file-item ${isDir ? 'dir-item' : ''}`;
                item.innerHTML = `${isDir ? 'ðŸ“' : 'ðŸ“„'} ${child.name}`;
                
                if (isDir) {
                    item.onclick = () => renderDirectory(child, [...path, child.name]);
                } else {
                    item.onclick = () => renderFile(child);
                }
                
                explorer.appendChild(item);
            });
        }

        // Render file content
        function renderFile(file) {
            const contentDiv = document.getElementById('file-content');
            const content = PROJECT_FILES[file.path] || `// No preview available for ${file.name}`;
            
            if (file.name.endsWith('.md')) {
                contentDiv.innerHTML = marked.parse(content);
            } else {
                const pre = document.createElement('pre');
                const code = document.createElement('code');
                code.className = `language-${file.name.split('.').pop() || 'text'}`;
                code.textContent = content;
                pre.appendChild(code);
                contentDiv.innerHTML = `<h3>${file.path}</h3>`;
                contentDiv.appendChild(pre);
            }
            
            // Apply syntax highlighting
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        }

        // Update breadcrumb navigation
        function updateBreadcrumb(path) {
            const breadcrumb = document.getElementById('breadcrumb');
            breadcrumb.innerHTML = '<li class="breadcrumb-item"><a href="#" onclick="navigateTo([])">/</a></li>';
            
            let currentPath = [];
            path.forEach((segment, index) => {
                currentPath.push(segment);
                const li = document.createElement('li');
                li.className = `breadcrumb-item ${index === path.length - 1 ? 'active' : ''}`;
                
                if (index < path.length - 1) {
                    const a = document.createElement('a');
                    a.href = '#';
                    a.onclick = (e) => {
                        e.preventDefault();
                        navigateTo(currentPath);
                    };
                    a.textContent = segment;
                    li.appendChild(a);
                } else {
                    li.setAttribute('aria-current', 'page');
                    li.textContent = segment;
                }
                
                breadcrumb.appendChild(li);
            });
        }

        // Navigate to path
        function navigateTo(path) {
            let currentNode = fileSystem;
            let currentPath = [];
            
            for (const segment of path) {
                const node = (currentNode.children || []).find(n => n.name === segment);
                if (!node) break;
                currentNode = node;
                currentPath.push(segment);
            }
            
            if (currentNode.type === 'directory') {
                renderDirectory(currentNode, currentPath);
                updateBreadcrumb(currentPath);
                document.getElementById('file-content').innerHTML = 
                    `<h2>${currentPath.join('/') || 'Project Root'}</h2><p>Select a file to view its contents.</p>`;
            } else if (currentNode.type === 'file') {
                renderFile(currentNode);
            }
        }

        // Make navigateTo available globally for breadcrumb links
        window.navigateTo = navigateTo;
    </script>
</body>
</html>
